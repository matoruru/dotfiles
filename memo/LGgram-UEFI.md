# Gentoo Linux UEFI boot on LG gram
- date
- gdisk /dev/sda
  - o
  - n
  - Enter
  - Enter
  - +128M
  - EF00
  - n
  - Enter
  - Enter
  - Enter
  - Enter
  - w
- mkfs.vfat -F 32 /dev/sda1
- mkfs.ext4 /dev/sda2
- mount /dev/sda2 /mnt/gentoo
- mkdir /mnt/gentoo/boot
- mount /dev/sda1 /mnt/gentoo/boot
- cd /mnt/gentoo
- (download stage3 tarball (i did it using firefox))
- (extract tarball)
  - tar -xvjpf stage3* --xattrs --numeric-owner (in case of bz2)
  - tar -xvJpf stage3* --xattrs --numeric-owner (in case of bz)
- nano -w /mnt/gentoo/etc/portage/make.conf
  - CFLAGS
  - CXXFLAGS
  - MAKEOPTS
- mirrorselect -io >> /mnt/gentoo/etc/portage/make.conf
- cp -L /etc/resolv.conf /mnt/gentoo/etc/
- mount -t proc /proc /mnt/gentoo/proc
- mount --rbind /dev /mnt/gentoo/dev
- mount --rbind /sys /mnt/gentoo/sys
- chroot /mnt/gentoo /bin/bash
- source /etc/profile
- emerge --sync
- nano -w /etc/fstab
  - /dev/sda1 /boot vat noauto,noatime 1 2
  - /dev/sda2 / ext4 noatime 0 1
- nano -w /etc/locale.gen
- locale-gen
- eselect locale list
- eselect locale set YY
- env-update && source /etc/profile
- emerge -avuDN @world gentoo-sources genkernel efibootmgr wireless-tools wpa_supplicant linux-firmware sudo
- cd /usr/src/linux
- genkernel all
- make modules_install
- make install
- cd /boot
- mkdir -p efi/boot
- cp vmlinuz*-gentoo efi/boot/bootx64.efi
- mount -o remount,rw /sys/firmware/efi/efivars
- efibootmgr -v
- efibootmgr -b X -B (if you want to delete any entry point)
- efibootmgr -c -d /dev/sda -L "Gentoo EFI Stub" -l "\efi\boot\bootx64.efi" -u "root=/dev/sda2 rw initrd=/initramfs-genkernel-x86_64.X.XX.XX-gentoo"
- nano -w /etc/conf.d/net
  - module_wlp2s0="dhcp"
  - modules="wpa_supplicant"
  - wpa_supplicant_wlp2s0="-Dwext"
- cd /etc/init.d
- ln -s net.lo net.wlp2s0
- rc-update add net.wlp2s0 default
- wpa_passphrase "SSID" "PASSPHRASE" > /etc/wpa_supplicant/wpa_supplicant.conf
- useradd -m -G wheel,portage XXX
- passwd XXX
- visudo
- Ctrl D
- reboot
- eselect profile list
- eselect profile set XX
- emerge -avuDN @world
